(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["upload"],{2679:function(e,t,n){"use strict";n.r(t);var a=n("7a23"),o=Object(a["f"])(" Upload Page ");function i(e,t,n,i,r,c){var u=Object(a["w"])("UploadForm");return Object(a["p"])(),Object(a["d"])("div",null,[o,Object(a["g"])(u)])}var r=Object(a["G"])("data-v-07096006");Object(a["s"])("data-v-07096006");var c={id:"formContainer"},u={id:"uploadForm"},d=Object(a["g"])("div",{id:"preview"},null,-1);Object(a["q"])();var l=r((function(e,t,n,o,i,r){return Object(a["p"])(),Object(a["d"])("div",c,[Object(a["g"])("form",u,[Object(a["g"])("input",{type:"file",name:"uploadField",id:"uploadField",onChange:t[1]||(t[1]=function(){return r.onFileChange&&r.onFileChange.apply(r,arguments)}),accept:".jpeg, .jpg, .png, .gif, .mp4"},null,32),i.previewMediaUrl?(Object(a["p"])(),Object(a["d"])("img",{key:0,src:i.previewMediaUrl,alt:"Preview of your upload"},null,8,["src"])):Object(a["e"])("",!0),Object(a["F"])(Object(a["g"])("textarea",{name:"caption",id:"caption",maxlength:"200","onUpdate:modelValue":t[2]||(t[2]=function(e){return i.caption=e}),placeholder:"We take captions here too!"},null,512),[[a["B"],i.caption]]),Object(a["g"])("button",{onClick:t[3]||(t[3]=function(){return r.onSubmit&&r.onSubmit.apply(r,arguments)})},"Upload")]),d])})),p=n("1da1"),s=(n("96cf"),n("d3b7"),n("3ca3"),n("ddb0"),n("2b3d"),n("4c53"),n("b0c0"),n("47e3")),f={name:"UploadForm",data:function(){return{previewMediaUrl:null,file:null,caption:""}},methods:{onFileChange:function(e){this.$data.file=e.target.files[0],this.previewMediaUrl=URL.createObjectURL(this.$data.file)},onSubmit:function(){this.upload({file:this.file,caption:this.caption,isVideo:this.isVideo||!1,okta_uid:this.authState.idToken.claims.sub,username:this.authState.idToken.claims.name}).then((function(e){console.log(e)})).catch((function(e){return console.log(e)}))},upload:function(e){var t=this;return Object(p["a"])(regeneratorRuntime.mark((function n(){var a,o;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return a=new FormData,a.append("file",e.file),a.append("caption",e.caption),a.append("video",e.isVideo),a.append("okta_uid",e.okta_uid),a.append("username",e.username),n.next=8,fetch("http://".concat(s["resourceURL"],"/posts/create"),{method:"POST",credentials:"include",headers:{Authorization:"Bearer ".concat(t.$auth.getAccessToken())},body:a}).then((function(e){return console.log(e),e})).catch((function(e){return console.error(e),e}));case 8:return o=n.sent,n.abrupt("return",o);case 10:case"end":return n.stop()}}),n)})))()}}};n("f880");f.render=l,f.__scopeId="data-v-07096006";var b=f,h={name:"Upload",components:{UploadForm:b}};h.render=i;t["default"]=h},da42:function(e,t,n){},f880:function(e,t,n){"use strict";n("da42")}}]);
//# sourceMappingURL=upload.9c83312a.js.map